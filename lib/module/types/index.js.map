{"version":3,"names":["ProrationModesAndroid","PurchaseStateAndroid","PROMOTED_PRODUCT","InstallSourceAndroid","ProductType","SubscriptionPlatform"],"sources":["index.ts"],"sourcesContent":["import type {\n  AmazonModuleProps,\n  AndroidModuleProps,\n  IosModuleProps,\n} from '../modules';\nimport type {IosModulePropsSk2} from '../modules/iosSk2';\n\nimport type * as Apple from './apple';\n\nexport type Sku = string;\n\nexport enum ProrationModesAndroid {\n  IMMEDIATE_WITH_TIME_PRORATION = 1,\n  IMMEDIATE_AND_CHARGE_PRORATED_PRICE = 2,\n  IMMEDIATE_WITHOUT_PRORATION = 3,\n  DEFERRED = 4,\n  IMMEDIATE_AND_CHARGE_FULL_PRICE = 5,\n  UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY = 0,\n}\n\nexport enum PurchaseStateAndroid {\n  UNSPECIFIED_STATE = 0,\n  PURCHASED = 1,\n  PENDING = 2,\n}\n\nexport const PROMOTED_PRODUCT = 'iap-promoted-product';\n\nexport enum InstallSourceAndroid {\n  NOT_SET = 0,\n  GOOGLE_PLAY = 1,\n  AMAZON = 2,\n}\n\nexport enum ProductType {\n  /** Subscription */\n  subs = 'subs',\n\n  /** Subscription */\n  sub = 'sub',\n\n  /** Consumable */\n  inapp = 'inapp',\n\n  /** Consumable */\n  iap = 'iap',\n}\n\nexport interface ProductCommon {\n  type: 'subs' | 'sub' | 'inapp' | 'iap';\n  productId: string; //iOS\n  productIds?: string[];\n  title: string;\n  description: string;\n  price: string;\n  currency: string;\n  localizedPrice: string;\n  countryCode?: string;\n}\n\nexport interface ProductPurchase {\n  productId: string;\n  transactionId?: string;\n  transactionDate: number;\n  transactionReceipt: string;\n  purchaseToken?: string;\n  //iOS\n  quantityIOS?: number;\n  originalTransactionDateIOS?: string;\n  originalTransactionIdentifierIOS?: string;\n  //Android\n  productIds?: string[];\n  dataAndroid?: string;\n  signatureAndroid?: string;\n  autoRenewingAndroid?: boolean;\n  purchaseStateAndroid?: PurchaseStateAndroid;\n  isAcknowledgedAndroid?: boolean;\n  packageNameAndroid?: string;\n  developerPayloadAndroid?: string;\n  obfuscatedAccountIdAndroid?: string;\n  obfuscatedProfileIdAndroid?: string;\n  //Amazon\n  userIdAmazon?: string;\n  userMarketplaceAmazon?: string;\n  userJsonAmazon?: string;\n  isCanceledAmazon?: boolean;\n}\n\nexport interface PurchaseResult {\n  responseCode?: number;\n  debugMessage?: string;\n  code?: string;\n  message?: string;\n  purchaseToken?: string;\n}\n\nexport interface SubscriptionPurchase extends ProductPurchase {\n  autoRenewingAndroid?: boolean;\n  originalTransactionDateIOS?: string;\n  originalTransactionIdentifierIOS?: string;\n}\n\nexport type Purchase = ProductPurchase | SubscriptionPurchase;\n\nexport interface Discount {\n  identifier: string;\n  type: string;\n  numberOfPeriods: string;\n  price: string;\n  localizedPrice: string;\n  paymentMode: '' | 'FREETRIAL' | 'PAYASYOUGO' | 'PAYUPFRONT';\n  subscriptionPeriod: string;\n}\n\nexport interface ProductAndroid extends ProductCommon {\n  type: 'inapp' | 'iap';\n  oneTimePurchaseOfferDetails?: {\n    priceCurrencyCode: string;\n    formattedPrice: string;\n    priceAmountMicros: string;\n  };\n}\nexport interface ProductIOS extends ProductCommon {\n  type: 'inapp' | 'iap';\n}\n\nexport type Product = ProductAndroid | ProductIOS;\n\n/**\n * Can be used to distinguish the different platforms' subscription information\n */\nexport enum SubscriptionPlatform {\n  android = 'android',\n  amazon = 'amazon',\n  ios = 'ios',\n}\n\n/** Android Billing v5 type */\nexport interface SubscriptionAndroid {\n  platform: SubscriptionPlatform.android;\n  productType: 'subs';\n  name: string;\n  title: string;\n  description: string;\n  productId: string;\n  subscriptionOfferDetails: SubscriptionOfferAndroid[];\n}\n\nexport interface SubscriptionOfferAndroid {\n  offerToken: string;\n  pricingPhases: {\n    pricingPhaseList: PricingPhaseAndroid[];\n  };\n  offerTags: string[];\n}\n\nexport interface PricingPhaseAndroid {\n  formattedPrice: string;\n  priceCurrencyCode: string;\n  /**\n   * P1W, P1M, P1Y\n   */\n  billingPeriod: string;\n  billingCycleCount: number;\n  priceAmountMicros: string;\n  recurrenceMode: number;\n}\n\n/**\n * TODO: As of 2022-10-10, this typing is not verified against the real\n * Amazon API. Please update this if you have a more accurate type.\n */\nexport interface SubscriptionAmazon extends ProductCommon {\n  platform: SubscriptionPlatform.amazon;\n  type: 'subs';\n\n  productType?: string;\n  name?: string;\n}\n\nexport type SubscriptionIosPeriod = 'DAY' | 'WEEK' | 'MONTH' | 'YEAR' | '';\nexport interface SubscriptionIOS extends ProductCommon {\n  platform: SubscriptionPlatform.ios;\n  type: 'subs';\n  discounts?: Discount[];\n  introductoryPrice?: string;\n  introductoryPriceAsAmountIOS?: string;\n  introductoryPricePaymentModeIOS?:\n    | ''\n    | 'FREETRIAL'\n    | 'PAYASYOUGO'\n    | 'PAYUPFRONT';\n  introductoryPriceNumberOfPeriodsIOS?: string;\n  introductoryPriceSubscriptionPeriodIOS?: SubscriptionIosPeriod;\n\n  subscriptionPeriodNumberIOS?: string;\n  subscriptionPeriodUnitIOS?: SubscriptionIosPeriod;\n}\n\nexport type Subscription =\n  | SubscriptionAndroid\n  | SubscriptionAmazon\n  | SubscriptionIOS;\n\nexport interface RequestPurchaseBaseAndroid {\n  obfuscatedAccountIdAndroid?: string;\n  obfuscatedProfileIdAndroid?: string;\n  isOfferPersonalized?: boolean; // For AndroidBilling V5 https://developer.android.com/google/play/billing/integrate#personalized-price\n}\n\nexport interface RequestPurchaseAndroid extends RequestPurchaseBaseAndroid {\n  skus?: Sku[];\n}\n\nexport interface RequestPurchaseIOS {\n  sku?: Sku;\n  andDangerouslyFinishTransactionAutomaticallyIOS?: boolean;\n  /**\n   * UUID representing user account\n   */\n  appAccountToken?: string;\n  quantity?: number;\n  withOffer?: Apple.PaymentDiscount;\n}\n\nexport type RequestPurchase = RequestPurchaseAndroid & RequestPurchaseIOS;\n\n/**\n * In order to purchase a new subscription, every sku must have a selected offerToken\n * @see SubscriptionAndroid.subscriptionOfferDetails.offerToken\n */\nexport interface SubscriptionOffer {\n  sku: Sku;\n  offerToken: string;\n}\n\nexport interface RequestSubscriptionAndroid extends RequestPurchaseBaseAndroid {\n  purchaseTokenAndroid?: string;\n  prorationModeAndroid?: ProrationModesAndroid;\n  subscriptionOffers?: SubscriptionOffer[]; // For AndroidBilling V5\n}\n\nexport type RequestSubscriptionIOS = RequestPurchaseIOS;\n\nexport type RequestSubscription = RequestSubscriptionAndroid &\n  RequestSubscriptionIOS;\n\ndeclare module 'react-native' {\n  interface NativeModulesStatic {\n    RNIapIos: IosModuleProps;\n    RNIapIosSk2: IosModulePropsSk2;\n    RNIapModule: AndroidModuleProps;\n    RNIapAmazonModule: AmazonModuleProps;\n  }\n}\n"],"mappings":"AAWA,WAAYA,qBAAZ;;WAAYA,qB;EAAAA,qB,CAAAA,qB;EAAAA,qB,CAAAA,qB;EAAAA,qB,CAAAA,qB;EAAAA,qB,CAAAA,qB;EAAAA,qB,CAAAA,qB;EAAAA,qB,CAAAA,qB;GAAAA,qB,KAAAA,qB;;AASZ,WAAYC,oBAAZ;;WAAYA,oB;EAAAA,oB,CAAAA,oB;EAAAA,oB,CAAAA,oB;EAAAA,oB,CAAAA,oB;GAAAA,oB,KAAAA,oB;;AAMZ,OAAO,MAAMC,gBAAgB,GAAG,sBAAzB;AAEP,WAAYC,oBAAZ;;WAAYA,oB;EAAAA,oB,CAAAA,oB;EAAAA,oB,CAAAA,oB;EAAAA,oB,CAAAA,oB;GAAAA,oB,KAAAA,oB;;AAMZ,WAAYC,WAAZ;;WAAYA,W;EAAAA,W;EAAAA,W;EAAAA,W;EAAAA,W;GAAAA,W,KAAAA,W;;AA8FZ;AACA;AACA;AACA,WAAYC,oBAAZ;AAMA;;WANYA,oB;EAAAA,oB;EAAAA,oB;EAAAA,oB;GAAAA,oB,KAAAA,oB"}